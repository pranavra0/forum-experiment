{{define "view_thread"}}
  {{with index .Threads 0}}
    <article class="thread">
      <h2>{{.Title}}</h2>
      <small>
        Posted by <strong>{{.Username}}</strong> — {{.CreatedAt}}
      </small>
      <p>{{.Content}}</p>
    </article>
  {{end}}

  <section class="replies">
    <h3>Replies</h3>
    {{range .Replies}}
      <article class="reply">
        <p>{{.Content}}</p>
        <small>
          By <strong>{{.Username}}</strong> — {{.CreatedAt}}
        </small>
      </article>
    {{else}}
      <p>No replies yet.</p>
    {{end}}
  </section>

  {{if .User}}
    <form method="POST" action="/thread/{{(index .Threads 0).ID}}/reply">
      <textarea name="content" rows="4" placeholder="Write your reply..." required></textarea>
      <button type="submit">Post Reply</button>
    </form>
  {{else}}
    <p><a href="/login">Log in to reply</a></p>
  {{end}}
{{end}}
